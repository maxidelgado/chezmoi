{{- $system_username := promptStringOnce . "system_username" "System username" -}}
{{- $company := promptStringOnce . "company" "Company" -}}
{{- $first_name := promptStringOnce . "first_name" "First name" -}}
{{- $last_name := promptStringOnce . "last_name" "Last name" -}}
{{- $personal_email := promptStringOnce . "personal_email" "Personal email" -}}
{{- $work_email := promptStringOnce . "work_email" "Work email" -}}

{{- $aws_credentials_path := printf "op://%s/aws-credentials" $company -}}
{{- $aws_access_key_path := printf "%s/access_key" $aws_credentials_path -}}
{{- $aws_secret_key_path := printf "%s/secret_key" $aws_credentials_path -}}
{{- $aws_region_path := printf "%s/region" $aws_credentials_path -}}

{{- $personal_signing_key_path := "op://personal/ssh-key" -}}
{{- $personal_public_key_path := printf "%s/public key" $personal_signing_key_path -}}
{{- $work_signing_key_path := printf "op://%s/ssh-key" $company -}}
{{- $work_public_key_path := printf "%s/public key" $work_signing_key_path -}}

# This file is dynamically generated by chezmoi. DO NOT EDIT.

[data]
    # General
    system_username = {{ $system_username | quote }}
    company = {{ $company | quote }}
    first_name = {{ $first_name | quote }}
    last_name = {{ $last_name | quote }}
    full_name = {{ printf "%s %s" $first_name $last_name | quote }}
    personal_email = {{ $personal_email | quote }}
    work_email = {{ $work_email | quote }}
    
    # AWS
    aws_access_key = {{ onepasswordRead $aws_access_key_path | quote }}
    aws_secret_key = {{ onepasswordRead $aws_secret_key_path | quote }}
    aws_region = {{ onepasswordRead $aws_region_path | quote }}

    # Signing keys
    personal_signing_key_path = {{ $personal_signing_key_path | quote }}
    work_signing_key_path = {{ $work_signing_key_path | quote }}
    personal_signing_key = {{ onepasswordRead $personal_public_key_path | quote }}
    work_signing_key = {{ onepasswordRead $work_public_key_path | quote }}

[edit]
    command = "nvim"
